import fs from "fs";
import path from "path";
import { fileURLToPath } from "url";

//#region src/create/pull-rules.ts
const pullRules = async (args, context) => {
	const __dirname = path.dirname(fileURLToPath(import.meta.url));
	const cursorTemplateDir = path.join(__dirname, "..", "cursor-rules", "dot-files");
	const files = fs.readdirSync(cursorTemplateDir);
	for (const file of files) {
		const targetFile = path.join(args.rootDir, file);
		const isFolder = fs.statSync(path.join(cursorTemplateDir, file)).isDirectory();
		const type = isFolder ? "Folder" : "File";
		if (args.force || !fs.existsSync(targetFile)) {
			fs.cpSync(path.join(cursorTemplateDir, file), targetFile, {
				recursive: isFolder,
				force: true
			});
			context.log(`${file}-created`, (message) => message.tag("success").append(type).append(file, "cyan").append("has been created."));
		} else context.log(`${file}-skipped`, (message) => message.tag("warning").append(type).append(file, "cyan").append("already exists, skipping..."));
	}
};

//#endregion
export { pullRules };
//# sourceMappingURL=pull-rules.mjs.map