{"version":3,"file":"enrichment-plugin.mjs","names":[],"sources":["../../../src/utils/amplitude/enrichment-plugin.ts"],"sourcesContent":["import type { EnrichmentPlugin, Event } from '@amplitude/analytics-types'\nimport os from 'os'\n\nexport class MotiaEnrichmentPlugin implements EnrichmentPlugin {\n  name = 'motia-enrichment'\n  type = 'enrichment' as const\n\n  async setup(): Promise<undefined> {\n    return\n  }\n\n  async execute(event: Event): Promise<Event> {\n    event.app_version = process.env.npm_package_version || 'unknown'\n\n    if (!event.extra) {\n      event.extra = {}\n    }\n\n    event.extra.motia_version = process.env.npm_package_dependencies_motia || 'unknown'\n    event.extra.source = 'backend'\n    event.os_name = os.platform() === 'darwin' ? 'macOS' : os.platform() === 'win32' ? 'Windows' : 'Linux'\n    event.os_version = os.release()\n    event.platform = os.platform()\n    event.device_model = os.type()\n    event.device_manufacturer = os.machine()\n    event.device_brand = os.platform() === 'darwin' ? 'Apple' : os.platform() === 'win32' ? 'Microsoft' : 'Unknown'\n\n    return event\n  }\n}\n"],"mappings":";;;AAGA,IAAa,wBAAb,MAA+D;;cACtD;cACA;;CAEP,MAAM,QAA4B;CAIlC,MAAM,QAAQ,OAA8B;AAC1C,QAAM,cAAc,QAAQ,IAAI,uBAAuB;AAEvD,MAAI,CAAC,MAAM,MACT,OAAM,QAAQ,EAAE;AAGlB,QAAM,MAAM,gBAAgB,QAAQ,IAAI,kCAAkC;AAC1E,QAAM,MAAM,SAAS;AACrB,QAAM,UAAU,GAAG,UAAU,KAAK,WAAW,UAAU,GAAG,UAAU,KAAK,UAAU,YAAY;AAC/F,QAAM,aAAa,GAAG,SAAS;AAC/B,QAAM,WAAW,GAAG,UAAU;AAC9B,QAAM,eAAe,GAAG,MAAM;AAC9B,QAAM,sBAAsB,GAAG,SAAS;AACxC,QAAM,eAAe,GAAG,UAAU,KAAK,WAAW,UAAU,GAAG,UAAU,KAAK,UAAU,cAAc;AAEtG,SAAO"}