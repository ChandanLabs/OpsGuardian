{"version":3,"file":"read-requirements.mjs","names":["requirements: Requirements"],"sources":["../../../../../../src/cloud/build/builders/python/python-data/read-requirements.ts"],"sourcesContent":["import fs from 'fs'\n\n/**\n * { libraryName: lineFromRequirementsFile }\n *\n * Example:\n * { scikit-learn: 'scikit-learn==1.0.2' }\n */\nexport type Requirements = Record<string, string>\n\n/**\n * Read the requirements.txt file and return a set of dependencies\n * @param filePath\n * @returns set of all dependencies names\n */\nexport const readRequirements = (filePath: string): Requirements => {\n  const content = fs.readFileSync(filePath, 'utf8')\n\n  const lines = content.split('\\n')\n  const requirements: Requirements = {}\n\n  for (const line of lines) {\n    const trimmedLine = line.trim()\n\n    // Skip empty lines and comments\n    if (!trimmedLine || trimmedLine.startsWith('#')) {\n      continue\n    }\n\n    // Extract package name (everything before version specifiers)\n    const packageMatch = trimmedLine.match(/^([a-zA-Z0-9_-]+)/)\n\n    if (packageMatch) {\n      const packageName = packageMatch[1]\n      requirements[packageName] = trimmedLine\n    }\n  }\n\n  return requirements\n}\n"],"mappings":";;;;;;;;AAeA,MAAa,oBAAoB,aAAmC;CAGlE,MAAM,QAFU,GAAG,aAAa,UAAU,OAAO,CAE3B,MAAM,KAAK;CACjC,MAAMA,eAA6B,EAAE;AAErC,MAAK,MAAM,QAAQ,OAAO;EACxB,MAAM,cAAc,KAAK,MAAM;AAG/B,MAAI,CAAC,eAAe,YAAY,WAAW,IAAI,CAC7C;EAIF,MAAM,eAAe,YAAY,MAAM,oBAAoB;AAE3D,MAAI,cAAc;GAChB,MAAM,cAAc,aAAa;AACjC,gBAAa,eAAe;;;AAIhC,QAAO"}