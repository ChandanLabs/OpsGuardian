{"version":3,"file":"extract-python-data.mjs","names":["result: TraverseTreeResult","resultDependencies: Requirements"],"sources":["../../../../../../src/cloud/build/builders/python/python-data/extract-python-data.ts"],"sourcesContent":["import type { Requirements } from './read-requirements'\nimport { type TraverseTreeResult, traverseTree } from './traverse-tree'\n\nexport type PythonResult = {\n  standardLibDependencies: string[]\n  externalDependencies: Requirements\n  files: string[] // relative to rootDir\n}\n\nexport const extractPythonData = (\n  rootDir: string,\n  filePath: string,\n  dependenciesMap: Record<string, string>,\n  // optional\n  fileContent?: string, // used on files that are not on the file system\n): PythonResult => {\n  const result: TraverseTreeResult = {\n    standardLibDependencies: new Set(),\n    externalDependencies: new Set(),\n    files: new Set(),\n  }\n\n  traverseTree(rootDir, filePath, result, dependenciesMap, fileContent)\n\n  const resultDependencies: Requirements = {}\n\n  result.externalDependencies.forEach((dependency) => {\n    resultDependencies[dependency] = dependenciesMap[dependency]\n  })\n\n  return {\n    standardLibDependencies: Array.from(result.standardLibDependencies),\n    externalDependencies: resultDependencies,\n    files: Array.from(result.files),\n  }\n}\n"],"mappings":";;;AASA,MAAa,qBACX,SACA,UACA,iBAEA,gBACiB;CACjB,MAAMA,SAA6B;EACjC,yCAAyB,IAAI,KAAK;EAClC,sCAAsB,IAAI,KAAK;EAC/B,uBAAO,IAAI,KAAK;EACjB;AAED,cAAa,SAAS,UAAU,QAAQ,iBAAiB,YAAY;CAErE,MAAMC,qBAAmC,EAAE;AAE3C,QAAO,qBAAqB,SAAS,eAAe;AAClD,qBAAmB,cAAc,gBAAgB;GACjD;AAEF,QAAO;EACL,yBAAyB,MAAM,KAAK,OAAO,wBAAwB;EACnE,sBAAsB;EACtB,OAAO,MAAM,KAAK,OAAO,MAAM;EAChC"}