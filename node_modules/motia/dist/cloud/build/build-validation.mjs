import { apiEndpointsValidator } from "./validations/api-endpoints.validator.mjs";
import { cronExpressionsValidator } from "./validations/cron-expressions.validator.mjs";
import { duplicateStepNamesValidator } from "./validations/duplicate-step-names.validator.mjs";
import { infrastructureConfigsValidator } from "./validations/infrastructure-configs.validator.mjs";
import { routerBundleSizesValidator } from "./validations/router-bundle-sizes.validator.mjs";
import { stepBundleSizesValidator } from "./validations/step-bundle-sizes.validator.mjs";
import { stepNameLengthsValidator } from "./validations/step-name-lengths.validator.mjs";

//#region src/cloud/build/build-validation.ts
const buildValidation = (builder, listener) => {
	const { errors, warnings } = validateStepsConfig(builder);
	if (warnings.length > 0) warnings.forEach((warning) => listener.onBuildWarning(warning));
	if (errors.length > 0) {
		listener.onBuildErrors(errors);
		return false;
	}
	return true;
};
const validationPipeline = [
	duplicateStepNamesValidator,
	stepBundleSizesValidator,
	cronExpressionsValidator,
	apiEndpointsValidator,
	stepNameLengthsValidator,
	infrastructureConfigsValidator,
	routerBundleSizesValidator
];
const runValidationPipeline = (builder, validators) => {
	return validators.reduce((acc, validator) => {
		const result = validator(builder);
		return {
			errors: [...acc.errors, ...result.errors],
			warnings: [...acc.warnings, ...result.warnings]
		};
	}, {
		errors: [],
		warnings: []
	});
};
const validateStepsConfig = (builder) => {
	return runValidationPipeline(builder, validationPipeline);
};

//#endregion
export { buildValidation };
//# sourceMappingURL=build-validation.mjs.map