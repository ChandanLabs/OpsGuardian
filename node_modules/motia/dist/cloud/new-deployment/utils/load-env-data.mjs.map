{"version":3,"file":"load-env-data.mjs","names":["envData: Record<string, string>"],"sources":["../../../../src/cloud/new-deployment/utils/load-env-data.ts"],"sourcesContent":["import fs from 'fs'\nimport type { Message } from '../../cli-output-manager'\nimport type { CliContext } from '../../config-utils'\n\nexport const loadEnvData = (envFile: string, context: CliContext): Record<string, string> => {\n  if (!envFile) {\n    return {}\n  }\n\n  context.log('load-env', (message: Message) => message.tag('progress').append('Loading environment variables...'))\n\n  if (envFile && !fs.existsSync(envFile)) {\n    context.log('load-env', (message: Message) =>\n      message\n        .tag('failed')\n        .append('Environment file not found:')\n        .append(envFile, 'red')\n        .box(['Please check the environment file path and try again'], 'red'),\n    )\n    context.exit(1)\n  }\n\n  const data = parseEnvFile(envFile)\n\n  context.log('load-env', (message: Message) => {\n    message.tag('success').append('Environment variables loaded from file')\n\n    const boxText = Object.keys(data)\n      .map((key) => `${key}=***`)\n      .join('\\n')\n\n    return message.box([boxText], 'blue')\n  })\n\n  return data\n}\n\nconst parseEnvFile = (filePath: string): Record<string, string> => {\n  const envContent = fs.readFileSync(filePath, 'utf-8')\n  const envLines = envContent.split('\\n')\n  const envData: Record<string, string> = {}\n\n  for (const line of envLines) {\n    const trimmedLine = line.trim()\n    if (!trimmedLine || trimmedLine.startsWith('#')) {\n      continue\n    }\n\n    const [key, ...valueParts] = trimmedLine.split('=')\n    const value = valueParts.join('=')\n\n    if (key && value) {\n      envData[key.trim()] = value.trim().replace(/^[\"'](.*)[\"']$/, '$1')\n    }\n  }\n\n  return envData\n}\n"],"mappings":";;;AAIA,MAAa,eAAe,SAAiB,YAAgD;AAC3F,KAAI,CAAC,QACH,QAAO,EAAE;AAGX,SAAQ,IAAI,aAAa,YAAqB,QAAQ,IAAI,WAAW,CAAC,OAAO,mCAAmC,CAAC;AAEjH,KAAI,WAAW,CAAC,GAAG,WAAW,QAAQ,EAAE;AACtC,UAAQ,IAAI,aAAa,YACvB,QACG,IAAI,SAAS,CACb,OAAO,8BAA8B,CACrC,OAAO,SAAS,MAAM,CACtB,IAAI,CAAC,uDAAuD,EAAE,MAAM,CACxE;AACD,UAAQ,KAAK,EAAE;;CAGjB,MAAM,OAAO,aAAa,QAAQ;AAElC,SAAQ,IAAI,aAAa,YAAqB;AAC5C,UAAQ,IAAI,UAAU,CAAC,OAAO,yCAAyC;EAEvE,MAAM,UAAU,OAAO,KAAK,KAAK,CAC9B,KAAK,QAAQ,GAAG,IAAI,MAAM,CAC1B,KAAK,KAAK;AAEb,SAAO,QAAQ,IAAI,CAAC,QAAQ,EAAE,OAAO;GACrC;AAEF,QAAO;;AAGT,MAAM,gBAAgB,aAA6C;CAEjE,MAAM,WADa,GAAG,aAAa,UAAU,QAAQ,CACzB,MAAM,KAAK;CACvC,MAAMA,UAAkC,EAAE;AAE1C,MAAK,MAAM,QAAQ,UAAU;EAC3B,MAAM,cAAc,KAAK,MAAM;AAC/B,MAAI,CAAC,eAAe,YAAY,WAAW,IAAI,CAC7C;EAGF,MAAM,CAAC,KAAK,GAAG,cAAc,YAAY,MAAM,IAAI;EACnD,MAAM,QAAQ,WAAW,KAAK,IAAI;AAElC,MAAI,OAAO,MACT,SAAQ,IAAI,MAAM,IAAI,MAAM,MAAM,CAAC,QAAQ,kBAAkB,KAAK;;AAItE,QAAO"}