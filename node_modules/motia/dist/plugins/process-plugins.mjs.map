{"version":3,"file":"process-plugins.mjs","names":["context: MotiaPluginContext","appConfig: Config","plugins: MotiaPlugin[]"],"sources":["../../src/plugins/process-plugins.ts"],"sourcesContent":["import type { Config, MotiaPlugin, MotiaPluginContext, MotiaServer } from '@motiadev/core'\nimport { createPluginContext } from './create-plugin-context'\nimport { loadConfig } from './load-config'\nimport { processSteps } from './process-steps'\n\nexport const processPlugins = async (motiaServer: MotiaServer): Promise<MotiaPlugin[]> => {\n  const { printer, motia } = motiaServer\n  const baseDir = motia.lockedData.baseDir\n\n  const context: MotiaPluginContext = createPluginContext(motiaServer)\n\n  const appConfig: Config = await loadConfig(baseDir, printer)\n  if (!appConfig?.plugins) {\n    printer.printPluginError('No plugins found in motia.config.ts')\n    return []\n  }\n\n  const plugins: MotiaPlugin[] = appConfig.plugins?.flatMap((item) => item(context)) || []\n  await processSteps(motiaServer, plugins, baseDir)\n  return plugins\n}\n"],"mappings":";;;;;AAKA,MAAa,iBAAiB,OAAO,gBAAqD;CACxF,MAAM,EAAE,SAAS,UAAU;CAC3B,MAAM,UAAU,MAAM,WAAW;CAEjC,MAAMA,UAA8B,oBAAoB,YAAY;CAEpE,MAAMC,YAAoB,MAAM,WAAW,SAAS,QAAQ;AAC5D,KAAI,CAAC,WAAW,SAAS;AACvB,UAAQ,iBAAiB,sCAAsC;AAC/D,SAAO,EAAE;;CAGX,MAAMC,UAAyB,UAAU,SAAS,SAAS,SAAS,KAAK,QAAQ,CAAC,IAAI,EAAE;AACxF,OAAM,aAAa,aAAa,SAAS,QAAQ;AACjD,QAAO"}