{"version":3,"file":"load-config.mjs","names":[],"sources":["../../src/plugins/load-config.ts"],"sourcesContent":["import fs from 'node:fs'\nimport path from 'node:path'\nimport { fileURLToPath } from 'node:url'\nimport type { Config, Printer } from '@motiadev/core'\nimport { globSync } from 'glob'\nimport { createJiti } from 'jiti'\nimport { installPluginDependencies } from './install-plugin-dependencies'\n\nconst __dirname = path.dirname(fileURLToPath(import.meta.url))\nconst jiti = createJiti(import.meta.url)\n\nexport const loadConfig = async (baseDir: string, printer: Printer): Promise<Config> => {\n  const configFiles = globSync('motia.config.{ts,js}', { absolute: true, cwd: baseDir })\n  if (configFiles.length === 0) {\n    const templatePath = path.join(__dirname, '../create/templates/nodejs/motia.config.ts.txt')\n    const templateContent = fs.readFileSync(templatePath, 'utf-8')\n    const configPath = path.join(baseDir, 'motia.config.ts')\n    fs.writeFileSync(configPath, templateContent)\n    printer.printPluginLog('Created motia.config.ts')\n\n    await installPluginDependencies(baseDir, printer)\n\n    return (await jiti.import(configPath, { default: true })) as Config\n  }\n\n  return (await jiti.import(configFiles[0], { default: true })) as Config\n}\n"],"mappings":";;;;;;;;AAQA,MAAM,YAAY,KAAK,QAAQ,cAAc,OAAO,KAAK,IAAI,CAAC;AAC9D,MAAM,OAAO,WAAW,OAAO,KAAK,IAAI;AAExC,MAAa,aAAa,OAAO,SAAiB,YAAsC;CACtF,MAAM,cAAc,SAAS,wBAAwB;EAAE,UAAU;EAAM,KAAK;EAAS,CAAC;AACtF,KAAI,YAAY,WAAW,GAAG;EAC5B,MAAM,eAAe,KAAK,KAAK,WAAW,iDAAiD;EAC3F,MAAM,kBAAkB,GAAG,aAAa,cAAc,QAAQ;EAC9D,MAAM,aAAa,KAAK,KAAK,SAAS,kBAAkB;AACxD,KAAG,cAAc,YAAY,gBAAgB;AAC7C,UAAQ,eAAe,0BAA0B;AAEjD,QAAM,0BAA0B,SAAS,QAAQ;AAEjD,SAAQ,MAAM,KAAK,OAAO,YAAY,EAAE,SAAS,MAAM,CAAC;;AAG1D,QAAQ,MAAM,KAAK,OAAO,YAAY,IAAI,EAAE,SAAS,MAAM,CAAC"}