import { spawn } from "child_process";

//#region src/docker/utils/promised-exec.ts
const promiseExec = (command, inheritStdio = true) => {
	return new Promise((resolve, reject) => {
		const [cmd, ...args] = command.split(" ");
		const child = spawn(cmd, args, { stdio: inheritStdio ? "inherit" : "pipe" });
		child.on("close", (code) => {
			if (code !== 0) {
				const error = /* @__PURE__ */ new Error(`Command failed with exit code ${code}`);
				if (inheritStdio) console.error(`Error running command: cmd ${command}, error ${error.message}`);
				reject(error);
				return;
			}
			resolve();
		});
		child.on("error", (error) => {
			if (inheritStdio) console.error(`Error running command: cmd ${command}, error ${error.message}`);
			reject(error);
		});
	});
};

//#endregion
export { promiseExec };
//# sourceMappingURL=promised-exec.mjs.map