{"version":3,"file":"promised-exec.mjs","names":[],"sources":["../../../src/docker/utils/promised-exec.ts"],"sourcesContent":["import { spawn } from 'child_process'\n\nexport const promiseExec = (command: string, inheritStdio: boolean = true): Promise<void> => {\n  return new Promise((resolve, reject) => {\n    const [cmd, ...args] = command.split(' ')\n    const child = spawn(cmd, args, { stdio: inheritStdio ? 'inherit' : 'pipe' })\n\n    child.on('close', (code) => {\n      if (code !== 0) {\n        const error = new Error(`Command failed with exit code ${code}`)\n        if (inheritStdio) {\n          console.error(`Error running command: cmd ${command}, error ${error.message}`)\n        }\n        reject(error)\n        return\n      }\n      resolve()\n    })\n\n    child.on('error', (error) => {\n      if (inheritStdio) {\n        console.error(`Error running command: cmd ${command}, error ${error.message}`)\n      }\n      reject(error)\n    })\n  })\n}\n"],"mappings":";;;AAEA,MAAa,eAAe,SAAiB,eAAwB,SAAwB;AAC3F,QAAO,IAAI,SAAS,SAAS,WAAW;EACtC,MAAM,CAAC,KAAK,GAAG,QAAQ,QAAQ,MAAM,IAAI;EACzC,MAAM,QAAQ,MAAM,KAAK,MAAM,EAAE,OAAO,eAAe,YAAY,QAAQ,CAAC;AAE5E,QAAM,GAAG,UAAU,SAAS;AAC1B,OAAI,SAAS,GAAG;IACd,MAAM,wBAAQ,IAAI,MAAM,iCAAiC,OAAO;AAChE,QAAI,aACF,SAAQ,MAAM,8BAA8B,QAAQ,UAAU,MAAM,UAAU;AAEhF,WAAO,MAAM;AACb;;AAEF,YAAS;IACT;AAEF,QAAM,GAAG,UAAU,UAAU;AAC3B,OAAI,aACF,SAAQ,MAAM,8BAA8B,QAAQ,UAAU,MAAM,UAAU;AAEhF,UAAO,MAAM;IACb;GACF"}