{"version":3,"file":"build.mjs","names":["path","fs"],"sources":["../../src/docker/build.ts"],"sourcesContent":["import { getProjectIdentifier, trackEvent } from '@motiadev/core'\nimport * as fs from 'fs'\nimport * as path from 'path'\nimport { identifyUser } from '../utils/analytics'\nimport { buildDockerImage } from './utils/build-docker-image'\nimport { printMotiaDockerIntro } from './utils/print-intro'\n\nexport const build = async (projectName?: string): Promise<void> => {\n  printMotiaDockerIntro()\n\n  identifyUser()\n\n  let nextProjectName = projectName\n  if (!projectName) {\n    const packageJsonPath = path.join(process.cwd(), 'package.json')\n    const packageJson = JSON.parse(fs.readFileSync(packageJsonPath, 'utf-8'))\n    nextProjectName = packageJson.name\n  }\n\n  trackEvent('docker_build_command', {\n    dockerImageName: nextProjectName,\n    project_name: getProjectIdentifier(process.cwd()),\n  })\n\n  console.log(`Preparing the docker image for project: ${nextProjectName}`)\n\n  await buildDockerImage(nextProjectName)\n}\n"],"mappings":";;;;;;;;AAOA,MAAa,QAAQ,OAAO,gBAAwC;AAClE,wBAAuB;AAEvB,eAAc;CAEd,IAAI,kBAAkB;AACtB,KAAI,CAAC,aAAa;EAChB,MAAM,kBAAkBA,OAAK,KAAK,QAAQ,KAAK,EAAE,eAAe;AAEhE,oBADoB,KAAK,MAAMC,KAAG,aAAa,iBAAiB,QAAQ,CAAC,CAC3C;;AAGhC,YAAW,wBAAwB;EACjC,iBAAiB;EACjB,cAAc,qBAAqB,QAAQ,KAAK,CAAC;EAClD,CAAC;AAEF,SAAQ,IAAI,2CAA2C,kBAAkB;AAEzE,OAAM,iBAAiB,gBAAgB"}