import { identifyUser } from "../utils/analytics.mjs";
import { buildDockerImage } from "./utils/build-docker-image.mjs";
import { printMotiaDockerIntro } from "./utils/print-intro.mjs";
import { getProjectIdentifier, trackEvent } from "@motiadev/core";
import * as fs$1 from "fs";
import * as path$1 from "path";

//#region src/docker/build.ts
const build = async (projectName) => {
	printMotiaDockerIntro();
	identifyUser();
	let nextProjectName = projectName;
	if (!projectName) {
		const packageJsonPath = path$1.join(process.cwd(), "package.json");
		nextProjectName = JSON.parse(fs$1.readFileSync(packageJsonPath, "utf-8")).name;
	}
	trackEvent("docker_build_command", {
		dockerImageName: nextProjectName,
		project_name: getProjectIdentifier(process.cwd())
	});
	console.log(`Preparing the docker image for project: ${nextProjectName}`);
	await buildDockerImage(nextProjectName);
};

//#endregion
export { build };
//# sourceMappingURL=build.mjs.map