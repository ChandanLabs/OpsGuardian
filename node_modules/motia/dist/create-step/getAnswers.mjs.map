{"version":3,"file":"getAnswers.mjs","names":["languageAnswer: any"],"sources":["../../src/create-step/getAnswers.ts"],"sourcesContent":["import inquirer from 'inquirer'\nimport pc from 'picocolors'\nimport { HTTP_METHODS, LANGUAGES, STEP_TYPES, type StepAnswers } from './types'\n\nexport const getStepAnswers = async (): Promise<StepAnswers> => {\n  console.log('\\nðŸ“ ', pc.bold('Create a new Motia step\\n'))\n\n  // Basic information prompts\n  const basicInfo = await inquirer.prompt([\n    {\n      type: 'input',\n      name: 'name',\n      message: 'Step name:',\n      validate: (input: string) => {\n        if (input.length === 0) return 'Name is required'\n        if (!/^[a-zA-Z][a-zA-Z0-9-_]*$/.test(input)) {\n          return 'Name must start with a letter and contain only letters, numbers, hyphens, and underscores'\n        }\n        return true\n      },\n    },\n    {\n      type: 'list',\n      name: 'type',\n      message: 'Select step type:',\n      choices: STEP_TYPES.map((type: string) => ({\n        name: type.toUpperCase(),\n        value: type,\n      })),\n    },\n  ])\n\n  let answers = { ...basicInfo }\n\n  const languageAnswer: any = {\n    type: 'list',\n    name: 'language',\n    message: 'Select language:',\n    choices: LANGUAGES.map((lang: string) => ({\n      name: lang.charAt(0).toUpperCase() + lang.slice(1),\n      value: lang,\n    })),\n  }\n\n  // Type-specific configuration prompts\n  if (answers.type === 'api') {\n    const apiConfig = await inquirer.prompt([\n      {\n        type: 'list',\n        name: 'method',\n        message: 'HTTP method:',\n        choices: HTTP_METHODS,\n      },\n      {\n        type: 'input',\n        name: 'path',\n        message: 'API path (e.g. /users):',\n        validate: (input: string) => {\n          if (!input.startsWith('/')) return 'Path must start with /'\n          return true\n        },\n      },\n    ])\n    answers = { ...answers, ...apiConfig }\n  } else if (answers.type === 'event') {\n    const eventConfig = await inquirer.prompt([\n      languageAnswer,\n      {\n        type: 'input',\n        name: 'subscriptions',\n        message: 'Event subscriptions (comma-separated):',\n        filter: (input: string) =>\n          input\n            .split(',')\n            .map((s) => s.trim())\n            .filter(Boolean),\n      },\n    ])\n    answers = { ...answers, ...eventConfig }\n  } else if (answers.type === 'cron') {\n    const cronConfig = await inquirer.prompt([\n      languageAnswer,\n      {\n        type: 'input',\n        name: 'cronExpression',\n        message: 'Cron expression:',\n        validate: (input: string) => {\n          if (!input) return 'Cron expression is required'\n          const parts = input.split(' ')\n          if (parts.length !== 5) return 'Invalid cron expression format'\n          return true\n        },\n      },\n    ])\n    answers = { ...answers, ...cronConfig }\n  } else if (answers.type === 'noop') {\n    const noopConfig = await inquirer.prompt([\n      languageAnswer,\n      {\n        type: 'input',\n        name: 'virtualEmits',\n        message: 'Virtual emits (comma-separated):',\n        filter: (input: string) =>\n          input\n            .split(',')\n            .map((s) => s.trim())\n            .filter(Boolean),\n      },\n      {\n        type: 'input',\n        name: 'virtualSubscribes',\n        message: 'Virtual subscribes (comma-separated):',\n        filter: (input: string) =>\n          input\n            .split(',')\n            .map((s) => s.trim())\n            .filter(Boolean),\n      },\n    ])\n    answers = { ...answers, ...noopConfig }\n  }\n\n  // Common configuration prompts\n  const commonConfig = await inquirer.prompt([\n    {\n      type: 'input',\n      name: 'flows',\n      message: 'Flow names (comma-separated):',\n      filter: (input: string) =>\n        input\n          .split(',')\n          .map((s) => s.trim())\n          .filter(Boolean),\n      validate: (input: string) => {\n        if (input.length === 0) return 'At least one flow is required'\n        return true\n      },\n    },\n    {\n      type: 'input',\n      name: 'emits',\n      message: 'Events to emit (comma-separated):',\n      filter: (input: string) =>\n        input\n          .split(',')\n          .map((s) => s.trim())\n          .filter(Boolean),\n    },\n    {\n      type: 'input',\n      name: 'description',\n      message: 'Step description:',\n    },\n    {\n      type: 'confirm',\n      name: 'createOverride',\n      message: 'Create UI component override?',\n      default: false,\n    },\n  ])\n\n  const nextAnswers = { ...answers, ...commonConfig } as StepAnswers\n\n  return {\n    ...nextAnswers,\n    language: nextAnswers.type === 'api' ? 'typescript' : nextAnswers.language,\n  }\n}\n"],"mappings":"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"}