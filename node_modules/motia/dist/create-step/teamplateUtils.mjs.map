{"version":3,"file":"teamplateUtils.mjs","names":["fs","replacements: Record<string, string | string[]>","content"],"sources":["../../src/create-step/teamplateUtils.ts"],"sourcesContent":["import { promises as fs } from 'fs'\nimport path from 'path'\nimport { fileURLToPath } from 'url'\nimport type { StepAnswers } from './types'\n\n/**\n * Reads a template file and replaces variables\n */\nasync function readTemplate(templatePath: string, answers: StepAnswers): Promise<string> {\n  const content = await fs.readFile(templatePath, 'utf8')\n  return replaceTemplateVariables(content, answers)\n}\n\n/**\n * Replaces template variables with actual values\n */\nfunction replaceTemplateVariables(content: string, answers: StepAnswers): string {\n  const replacements: Record<string, string | string[]> = {\n    STEP_NAME: answers.name,\n    DESCRIPTION: answers.description || '',\n    FLOWS: JSON.stringify(answers.flows),\n    EMITS: JSON.stringify(answers.emits),\n    METHOD: answers.method || '',\n    PATH: answers.path || '',\n    SUBSCRIPTIONS: JSON.stringify(answers.subscriptions || []),\n    CRON_EXPRESSION: answers.cronExpression || '',\n    VIRTUAL_EMITS: JSON.stringify(answers.virtualEmits || []),\n    VIRTUAL_SUBSCRIBES: JSON.stringify(answers.virtualSubscribes || []),\n  }\n\n  return Object.entries(replacements).reduce((content, [key, value]) => {\n    const regex = new RegExp(`\\\\{\\\\{${key}\\\\}\\\\}`, 'g')\n    return content.replace(regex, String(value))\n  }, content)\n}\n\n/**\n * Generates the appropriate template based on language and type\n */\nconst __dirname = path.dirname(fileURLToPath(import.meta.url))\nexport async function generateTemplate(answers: StepAnswers): Promise<string> {\n  const templateDir = path.join(__dirname, 'templates', answers.type)\n  const templateFile = `template.${answers.language}.txt`\n  const templatePath = path.join(templateDir, templateFile)\n\n  try {\n    return await readTemplate(templatePath, answers)\n  } catch (error) {\n    throw new Error(`Failed to generate template: ${error}`)\n  }\n}\n"],"mappings":";;;;;;;;AAQA,eAAe,aAAa,cAAsB,SAAuC;AAEvF,QAAO,yBADS,MAAMA,SAAG,SAAS,cAAc,OAAO,EACd,QAAQ;;;;;AAMnD,SAAS,yBAAyB,SAAiB,SAA8B;CAC/E,MAAMC,eAAkD;EACtD,WAAW,QAAQ;EACnB,aAAa,QAAQ,eAAe;EACpC,OAAO,KAAK,UAAU,QAAQ,MAAM;EACpC,OAAO,KAAK,UAAU,QAAQ,MAAM;EACpC,QAAQ,QAAQ,UAAU;EAC1B,MAAM,QAAQ,QAAQ;EACtB,eAAe,KAAK,UAAU,QAAQ,iBAAiB,EAAE,CAAC;EAC1D,iBAAiB,QAAQ,kBAAkB;EAC3C,eAAe,KAAK,UAAU,QAAQ,gBAAgB,EAAE,CAAC;EACzD,oBAAoB,KAAK,UAAU,QAAQ,qBAAqB,EAAE,CAAC;EACpE;AAED,QAAO,OAAO,QAAQ,aAAa,CAAC,QAAQ,WAAS,CAAC,KAAK,WAAW;EACpE,MAAM,QAAQ,IAAI,OAAO,SAAS,IAAI,SAAS,IAAI;AACnD,SAAOC,UAAQ,QAAQ,OAAO,OAAO,MAAM,CAAC;IAC3C,QAAQ;;;;;AAMb,MAAM,YAAY,KAAK,QAAQ,cAAc,OAAO,KAAK,IAAI,CAAC;AAC9D,eAAsB,iBAAiB,SAAuC;CAC5E,MAAM,cAAc,KAAK,KAAK,WAAW,aAAa,QAAQ,KAAK;CACnE,MAAM,eAAe,YAAY,QAAQ,SAAS;CAClD,MAAM,eAAe,KAAK,KAAK,aAAa,aAAa;AAEzD,KAAI;AACF,SAAO,MAAM,aAAa,cAAc,QAAQ;UACzC,OAAO;AACd,QAAM,IAAI,MAAM,gCAAgC,QAAQ"}