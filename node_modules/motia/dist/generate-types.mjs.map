{"version":3,"file":"generate-types.mjs","names":[],"sources":["../src/generate-types.ts"],"sourcesContent":["import { getStepConfig, getStreamConfig, LockedData, MemoryStreamAdapterManager, Printer } from '@motiadev/core'\nimport { randomUUID } from 'crypto'\nimport pc from 'picocolors'\nimport { getStepFiles, getStreamFiles } from './generate-locked-data'\n\nconst version = `${randomUUID()}:${Math.floor(Date.now() / 1000)}`\n\nexport const generateTypes = async (projectDir: string) => {\n  const files = getStepFiles(projectDir)\n  const streamsFiles = getStreamFiles(projectDir)\n\n  const lockedData = new LockedData(projectDir, new MemoryStreamAdapterManager(), new Printer(projectDir))\n\n  for (const filePath of files) {\n    const config = await getStepConfig(filePath, projectDir)\n\n    if (config) {\n      lockedData.createStep({ filePath, version, config }, { disableTypeCreation: true })\n    }\n  }\n\n  for (const filePath of streamsFiles) {\n    const config = await getStreamConfig(filePath, projectDir)\n\n    if (config) {\n      lockedData.createStream({ filePath, config }, { disableTypeCreation: true })\n    }\n  }\n\n  lockedData.saveTypes()\n\n  console.log(`${pc.green('âœ“ [SUCCESS]')} Types generated`)\n}\n"],"mappings":";;;;;;AAKA,MAAM,UAAU,GAAG,YAAY,CAAC,GAAG,KAAK,MAAM,KAAK,KAAK,GAAG,IAAK;AAEhE,MAAa,gBAAgB,OAAO,eAAuB;CACzD,MAAM,QAAQ,aAAa,WAAW;CACtC,MAAM,eAAe,eAAe,WAAW;CAE/C,MAAM,aAAa,IAAI,WAAW,YAAY,IAAI,4BAA4B,EAAE,IAAI,QAAQ,WAAW,CAAC;AAExG,MAAK,MAAM,YAAY,OAAO;EAC5B,MAAM,SAAS,MAAM,cAAc,UAAU,WAAW;AAExD,MAAI,OACF,YAAW,WAAW;GAAE;GAAU;GAAS;GAAQ,EAAE,EAAE,qBAAqB,MAAM,CAAC;;AAIvF,MAAK,MAAM,YAAY,cAAc;EACnC,MAAM,SAAS,MAAM,gBAAgB,UAAU,WAAW;AAE1D,MAAI,OACF,YAAW,aAAa;GAAE;GAAU;GAAQ,EAAE,EAAE,qBAAqB,MAAM,CAAC;;AAIhF,YAAW,WAAW;AAEtB,SAAQ,IAAI,GAAG,GAAG,MAAM,cAAc,CAAC,kBAAkB"}