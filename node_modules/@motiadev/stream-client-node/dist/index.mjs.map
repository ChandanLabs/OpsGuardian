{"version":3,"file":"index.mjs","names":["address: string","StreamClient"],"sources":["../src/stream-adapter.ts","../src/stream.ts"],"sourcesContent":["import type { SocketAdapter } from '@motiadev/stream-client'\nimport { type MessageEvent, WebSocket } from 'ws'\n\nexport class StreamSocketAdapter implements SocketAdapter {\n  private ws: WebSocket\n\n  constructor(\n    private address: string,\n    protocols?: string | string[] | undefined,\n  ) {\n    this.ws = new WebSocket(this.address, protocols)\n  }\n\n  connect(): void {}\n\n  send(message: string): void {\n    this.ws.send(message)\n  }\n\n  onMessage(callback: (message: string) => void): void {\n    const listener = (message: MessageEvent) => callback(message.data.toString())\n\n    this.ws.addEventListener('message', listener)\n  }\n\n  onOpen(callback: () => void): void {\n    this.ws.addEventListener('open', callback)\n  }\n\n  onClose(callback: () => void): void {\n    this.ws.addEventListener('close', callback)\n  }\n\n  close(): void {\n    this.ws.close()\n    this.ws.removeAllListeners()\n  }\n\n  isOpen(): boolean {\n    return this.ws.readyState === WebSocket.OPEN\n  }\n}\n","import { Stream as StreamClient } from '@motiadev/stream-client'\nimport { StreamSocketAdapter } from './stream-adapter'\n\nexport type NodeStreamOptions = {\n  protocols?: string | string[] | undefined\n}\n\nexport class Stream extends StreamClient {\n  constructor(address: string, options?: NodeStreamOptions) {\n    super(() => new StreamSocketAdapter(address, options?.protocols))\n  }\n}\n"],"mappings":";;;;AAGA,IAAa,sBAAb,MAA0D;CAGxD,YACE,AAAQA,SACR,WACA;EAFQ;AAGR,OAAK,KAAK,IAAI,UAAU,KAAK,SAAS,UAAU;;CAGlD,UAAgB;CAEhB,KAAK,SAAuB;AAC1B,OAAK,GAAG,KAAK,QAAQ;;CAGvB,UAAU,UAA2C;EACnD,MAAM,YAAY,YAA0B,SAAS,QAAQ,KAAK,UAAU,CAAC;AAE7E,OAAK,GAAG,iBAAiB,WAAW,SAAS;;CAG/C,OAAO,UAA4B;AACjC,OAAK,GAAG,iBAAiB,QAAQ,SAAS;;CAG5C,QAAQ,UAA4B;AAClC,OAAK,GAAG,iBAAiB,SAAS,SAAS;;CAG7C,QAAc;AACZ,OAAK,GAAG,OAAO;AACf,OAAK,GAAG,oBAAoB;;CAG9B,SAAkB;AAChB,SAAO,KAAK,GAAG,eAAe,UAAU;;;;;;AChC5C,IAAa,SAAb,cAA4BC,SAAa;CACvC,YAAY,SAAiB,SAA6B;AACxD,cAAY,IAAI,oBAAoB,SAAS,SAAS,UAAU,CAAC"}