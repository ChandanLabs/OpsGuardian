import { MergedConfig } from "./config-builder.mjs";
import { DLQManager } from "./dlq-manager.mjs";
import { Redis } from "ioredis";
import { Worker } from "bullmq";
import { Event, QueueConfig, SubscriptionHandle } from "@motiadev/core";

//#region src/worker-manager.d.ts
type SubscriberInfo = {
  topic: string;
  stepName: string;
  queueConfig?: QueueConfig;
};
type WorkerInfo = {
  worker: Worker;
  topic: string;
  stepName: string;
  handle: SubscriptionHandle;
  queueConfig?: QueueConfig;
};
declare class WorkerManager {
  private readonly workers;
  private readonly topicSubscriptions;
  private readonly connection;
  private readonly config;
  private readonly getQueueName;
  private readonly dlqManager;
  constructor(connection: Redis, config: MergedConfig, getQueueName: (topic: string, stepName: string) => string, dlqManager?: DLQManager);
  createWorker<TData>(topic: string, stepName: string, handler: (event: Event<TData>) => void | Promise<void>, options?: QueueConfig): SubscriptionHandle;
  getSubscribers(topic: string): SubscriberInfo[];
  getWorkerInfo(id: string): WorkerInfo | undefined;
  removeWorker(id: string): Promise<void>;
  closeAll(): Promise<void>;
  getSubscriptionCount(topic: string): number;
  listTopics(): string[];
  private addTopicSubscription;
  private removeTopicSubscription;
  private setupWorkerHandlers;
}
//#endregion
export { SubscriberInfo, WorkerManager };
//# sourceMappingURL=worker-manager.d.mts.map