{"version":3,"file":"config-builder.mjs","names":[],"sources":["../src/config-builder.ts"],"sourcesContent":["import {\n  DEFAULT_ATTEMPTS,\n  DEFAULT_BACKOFF_DELAY,\n  DEFAULT_CONCURRENCY,\n  DEFAULT_DLQ_SUFFIX,\n  DEFAULT_DLQ_TTL,\n  DEFAULT_PREFIX,\n  DEFAULT_REMOVE_ON_COMPLETE_COUNT,\n  DEFAULT_REMOVE_ON_FAIL_COUNT,\n} from './constants'\nimport type { BullMQEventAdapterConfig } from './types'\n\nexport type MergedConfig = Required<Pick<BullMQEventAdapterConfig, 'defaultJobOptions' | 'prefix' | 'concurrency'>> & {\n  dlq: Required<NonNullable<BullMQEventAdapterConfig['dlq']>>\n}\n\nexport function buildConfig(config: BullMQEventAdapterConfig): MergedConfig {\n  return {\n    concurrency: config.concurrency ?? DEFAULT_CONCURRENCY,\n    defaultJobOptions: {\n      attempts: DEFAULT_ATTEMPTS,\n      backoff: {\n        type: 'fixed',\n        delay: DEFAULT_BACKOFF_DELAY,\n      },\n      removeOnComplete: {\n        count: DEFAULT_REMOVE_ON_COMPLETE_COUNT,\n      },\n      removeOnFail: {\n        count: DEFAULT_REMOVE_ON_FAIL_COUNT,\n      },\n      ...config.defaultJobOptions,\n    },\n    prefix: config.prefix ?? DEFAULT_PREFIX,\n    dlq: {\n      enabled: config.dlq?.enabled ?? true,\n      ttl: config.dlq?.ttl ?? DEFAULT_DLQ_TTL,\n      suffix: config.dlq?.suffix ?? DEFAULT_DLQ_SUFFIX,\n    },\n  }\n}\n"],"mappings":";;;AAgBA,SAAgB,YAAY,QAAgD;AAC1E,QAAO;EACL,aAAa,OAAO,eAAe;EACnC,mBAAmB;GACjB,UAAU;GACV,SAAS;IACP,MAAM;IACN,OAAO;IACR;GACD,kBAAkB,EAChB,OAAO,kCACR;GACD,cAAc,EACZ,OAAO,8BACR;GACD,GAAG,OAAO;GACX;EACD,QAAQ,OAAO,UAAU;EACzB,KAAK;GACH,SAAS,OAAO,KAAK,WAAW;GAChC,KAAK,OAAO,KAAK,OAAO;GACxB,QAAQ,OAAO,KAAK,UAAU;GAC/B;EACF"}