{"version":3,"file":"collapsible-panel.js","names":["ChevronDown","Equal","React","PropsWithChildren","ReactNode","useCallback","useMemo","useRef","useState","ImperativePanelHandle","Panel","PanelGroup","PanelResizeHandle","cn","Button","Container","ContainerContent","ContainerHeader","ContainerHeaderProps","Tabs","CollapsiblePanelProps","id","header","withResizeHandle","className","variant","defaultTab","onTabChange","tab","PanelControlProps","isCollapsed","onToggle","PanelControls","FC","t0","$","_c","$i","Symbol","for","t1","undefined","t2","t3","t4","CustomResizeHandle","CollapsiblePanel","children","setIsCollapsed","panelRef","panel","current","expand","collapse","error","console","warn","onCollapse","onExpand","bb0","t5","t6","t7","container","t8","view","CollapsiblePanelGroup","ComponentProps","props","resizeHandleCount","setResizeHandleCount","sizes","length","child","index","isValidElement","last","hasResizeHandle","cloneElement","Children","map"],"sources":["../../../src/components/ui/collapsible-panel.tsx"],"sourcesContent":["import { ChevronDown, Equal } from 'lucide-react'\nimport React, { type PropsWithChildren, type ReactNode, useCallback, useMemo, useRef, useState } from 'react'\nimport { type ImperativePanelHandle, Panel, PanelGroup, PanelResizeHandle } from 'react-resizable-panels'\nimport { cn } from '../../lib/utils'\nimport { Button } from './button'\nimport { Container, ContainerContent, ContainerHeader, type ContainerHeaderProps } from './container'\nimport { Tabs } from './tabs'\n\nexport interface CollapsiblePanelProps extends PropsWithChildren {\n  id: string\n  header: ReactNode\n  withResizeHandle?: boolean\n  className?: string\n  variant?: ContainerHeaderProps['variant']\n  defaultTab?: string\n  onTabChange?: (tab: string) => void\n}\n\ninterface PanelControlProps {\n  header: ReactNode\n  isCollapsed: boolean\n  onToggle?: () => void\n  variant?: ContainerHeaderProps['variant']\n}\n\nconst PanelControls: React.FC<PanelControlProps> = ({ header, isCollapsed, onToggle, variant = 'default' }) => {\n  return (\n    <ContainerHeader variant={variant}>\n      {header}\n      <div className=\"flex-1\" />\n      {onToggle && (\n        <Button\n          variant=\"default\"\n          onClick={onToggle}\n          aria-label={isCollapsed ? 'Expand panel' : 'Collapse panel'}\n          className={cn('h-8 px-3 [&_svg]:size-5', { 'mr-5': variant === 'tabs' })}\n        >\n          <ChevronDown className={cn('transition-transform', { '-rotate-180': !isCollapsed })} />\n        </Button>\n      )}\n    </ContainerHeader>\n  )\n}\n\nconst CustomResizeHandle: React.FC = () => {\n  return (\n    <div className=\"relative\">\n      <div className=\"absolute inset-0 flex items-center justify-center\">\n        <PanelResizeHandle className=\"group relative\">\n          <div className=\"flex h-6 w-6 items-center justify-center rounded-full bg-background border border-border\">\n            <Equal className=\"h-4 w-4 text-muted-foreground\" />\n          </div>\n        </PanelResizeHandle>\n      </div>\n    </div>\n  )\n}\n\nexport const CollapsiblePanel: React.FC<CollapsiblePanelProps> = ({\n  id,\n  header,\n  children,\n  withResizeHandle,\n  className,\n  variant,\n  defaultTab,\n  onTabChange,\n}) => {\n  const [isCollapsed, setIsCollapsed] = useState(false)\n  const panelRef = useRef<ImperativePanelHandle>(null)\n\n  const onToggle = useCallback(() => {\n    const panel = panelRef.current\n    if (!panel) return\n\n    try {\n      if (panel.isCollapsed()) {\n        panel.expand()\n      } else {\n        panel.collapse()\n      }\n    } catch (error) {\n      console.warn('Failed to toggle panel:', error)\n    }\n  }, [])\n\n  const onCollapse = useCallback(() => setIsCollapsed(true), [])\n  const onExpand = useCallback(() => setIsCollapsed(false), [])\n\n  const view = useMemo(() => {\n    const container = (\n      <Container className=\"h-full\">\n        <PanelControls header={header} isCollapsed={isCollapsed} variant={variant} onToggle={onToggle} />\n        <ContainerContent>{children}</ContainerContent>\n      </Container>\n    )\n    if (variant == 'tabs') {\n      return (\n        <Tabs className=\"h-full\" defaultValue={defaultTab} onValueChange={onTabChange}>\n          {container}\n        </Tabs>\n      )\n    }\n    return container\n  }, [variant, isCollapsed, header, children, defaultTab, onToggle, onTabChange])\n\n  return (\n    <>\n      <Panel\n        id={id}\n        collapsible\n        ref={panelRef}\n        className={cn('min-h-[42px]', className)}\n        onCollapse={onCollapse}\n        onExpand={onExpand}\n      >\n        {view}\n      </Panel>\n      {withResizeHandle && <CustomResizeHandle />}\n    </>\n  )\n}\n\nexport const CollapsiblePanelGroup: React.FC<React.ComponentProps<typeof PanelGroup>> = ({ children, ...props }) => {\n  const [resizeHandleCount, setResizeHandleCount] = useState(0)\n  return (\n    <PanelGroup\n      onLayout={(sizes) => {\n        setResizeHandleCount(sizes.length)\n      }}\n      {...props}\n    >\n      {React.Children.map(children, (child, index) => {\n        if (React.isValidElement<CollapsiblePanelProps>(child)) {\n          const last = resizeHandleCount - 1 === index\n          const hasResizeHandle = resizeHandleCount > 1\n          return React.cloneElement(child, { withResizeHandle: hasResizeHandle && !last })\n        }\n        return child\n      })}\n    </PanelGroup>\n  )\n}\n"],"mappings":"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"}