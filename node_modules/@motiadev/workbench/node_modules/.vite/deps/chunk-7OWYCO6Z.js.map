{
  "version": 3,
  "sources": ["../../../../stream-client-browser/src/stream-adapter.ts", "../../../../stream-client-browser/src/stream.ts"],
  "sourcesContent": ["import type { SocketAdapter } from '@motiadev/stream-client'\n\nexport class StreamSocketAdapter implements SocketAdapter {\n  private ws: WebSocket\n\n  private onMessageListeners: ((message: MessageEvent<string>) => void)[] = []\n  private onOpenListeners: (() => void)[] = []\n  private onCloseListeners: (() => void)[] = []\n\n  constructor(\n    private address: string,\n    protocols?: string | string[] | undefined,\n  ) {\n    this.ws = new WebSocket(this.address, protocols)\n  }\n\n  connect(): void {}\n\n  send(message: string): void {\n    this.ws.send(message)\n  }\n\n  onMessage(callback: (message: string) => void): void {\n    const listener = (message: MessageEvent<string>) => callback(message.data)\n\n    this.ws.addEventListener('message', listener)\n    this.onMessageListeners.push(listener)\n  }\n\n  onOpen(callback: () => void): void {\n    this.ws.addEventListener('open', callback)\n    this.onOpenListeners.push(callback)\n  }\n\n  onClose(callback: () => void): void {\n    this.ws.addEventListener('close', callback)\n    this.onCloseListeners.push(callback)\n  }\n\n  close(): void {\n    this.ws.close()\n    this.onMessageListeners.forEach((listener) => this.ws.removeEventListener('message', listener))\n    this.onOpenListeners.forEach((listener) => this.ws.removeEventListener('open', listener))\n    this.onCloseListeners.forEach((listener) => this.ws.removeEventListener('close', listener))\n  }\n\n  isOpen(): boolean {\n    return this.ws.readyState === WebSocket.OPEN\n  }\n}\n", "import { Stream as StreamClient } from '@motiadev/stream-client'\nimport { StreamSocketAdapter } from './stream-adapter'\n\nexport type BrowserStreamOptions = {\n  protocols?: string | string[] | undefined\n}\n\nexport class Stream extends StreamClient {\n  constructor(address: string, options?: BrowserStreamOptions) {\n    super(() => new StreamSocketAdapter(address, options?.protocols))\n  }\n}\n"],
  "mappings": ";;;;;AAEA,IAAa,sBAAb,MAA0D;EAOxD,YACUA,SACR,WACA;AAFQ,SAAA,UAAA;8BALgE,CAAA;2BAChC,CAAA;4BACC,CAAA;AAMzC,SAAK,KAAK,IAAI,UAAU,KAAK,SAAS,SAAA;;EAGxC,UAAgB;EAAA;EAEhB,KAAK,SAAuB;AAC1B,SAAK,GAAG,KAAK,OAAA;;EAGf,UAAU,UAA2C;AACnD,UAAM,WAAA,CAAY,YAAkC,SAAS,QAAQ,IAAA;AAErE,SAAK,GAAG,iBAAiB,WAAW,QAAA;AACpC,SAAK,mBAAmB,KAAK,QAAA;;EAG/B,OAAO,UAA4B;AACjC,SAAK,GAAG,iBAAiB,QAAQ,QAAA;AACjC,SAAK,gBAAgB,KAAK,QAAA;;EAG5B,QAAQ,UAA4B;AAClC,SAAK,GAAG,iBAAiB,SAAS,QAAA;AAClC,SAAK,iBAAiB,KAAK,QAAA;;EAG7B,QAAc;AACZ,SAAK,GAAG,MAAA;AACR,SAAK,mBAAmB,QAAA,CAAS,aAAa,KAAK,GAAG,oBAAoB,WAAW,QAAA,CAAS;AAC9F,SAAK,gBAAgB,QAAA,CAAS,aAAa,KAAK,GAAG,oBAAoB,QAAQ,QAAA,CAAS;AACxF,SAAK,iBAAiB,QAAA,CAAS,aAAa,KAAK,GAAG,oBAAoB,SAAS,QAAA,CAAS;;EAG5F,SAAkB;AAChB,WAAO,KAAK,GAAG,eAAe,UAAU;;;ACxC5C,IAAaC,UAAb,cAA4BC,OAAa;EACvC,YAAY,SAAiB,SAAgC;AAC3D,UAAA,MAAY,IAAI,oBAAoB,SAAS,SAAS,SAAA,CAAU;;;",
  "names": ["address: string", "Stream", "StreamClient"]
}
