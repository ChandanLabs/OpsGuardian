{"version":3,"file":"index.js","names":["address: string","StreamClient"],"sources":["../src/stream-adapter.ts","../src/stream.ts"],"sourcesContent":["import type { SocketAdapter } from '@motiadev/stream-client'\n\nexport class StreamSocketAdapter implements SocketAdapter {\n  private ws: WebSocket\n\n  private onMessageListeners: ((message: MessageEvent<string>) => void)[] = []\n  private onOpenListeners: (() => void)[] = []\n  private onCloseListeners: (() => void)[] = []\n\n  constructor(\n    private address: string,\n    protocols?: string | string[] | undefined,\n  ) {\n    this.ws = new WebSocket(this.address, protocols)\n  }\n\n  connect(): void {}\n\n  send(message: string): void {\n    this.ws.send(message)\n  }\n\n  onMessage(callback: (message: string) => void): void {\n    const listener = (message: MessageEvent<string>) => callback(message.data)\n\n    this.ws.addEventListener('message', listener)\n    this.onMessageListeners.push(listener)\n  }\n\n  onOpen(callback: () => void): void {\n    this.ws.addEventListener('open', callback)\n    this.onOpenListeners.push(callback)\n  }\n\n  onClose(callback: () => void): void {\n    this.ws.addEventListener('close', callback)\n    this.onCloseListeners.push(callback)\n  }\n\n  close(): void {\n    this.ws.close()\n    this.onMessageListeners.forEach((listener) => this.ws.removeEventListener('message', listener))\n    this.onOpenListeners.forEach((listener) => this.ws.removeEventListener('open', listener))\n    this.onCloseListeners.forEach((listener) => this.ws.removeEventListener('close', listener))\n  }\n\n  isOpen(): boolean {\n    return this.ws.readyState === WebSocket.OPEN\n  }\n}\n","import { Stream as StreamClient } from '@motiadev/stream-client'\nimport { StreamSocketAdapter } from './stream-adapter'\n\nexport type BrowserStreamOptions = {\n  protocols?: string | string[] | undefined\n}\n\nexport class Stream extends StreamClient {\n  constructor(address: string, options?: BrowserStreamOptions) {\n    super(() => new StreamSocketAdapter(address, options?.protocols))\n  }\n}\n"],"mappings":";;;AAEA,IAAa,sBAAb,MAA0D;CAOxD,YACE,AAAQA,SACR,WACA;EAFQ;4BALgE,EAAE;yBAClC,EAAE;0BACD,EAAE;AAM3C,OAAK,KAAK,IAAI,UAAU,KAAK,SAAS,UAAU;;CAGlD,UAAgB;CAEhB,KAAK,SAAuB;AAC1B,OAAK,GAAG,KAAK,QAAQ;;CAGvB,UAAU,UAA2C;EACnD,MAAM,YAAY,YAAkC,SAAS,QAAQ,KAAK;AAE1E,OAAK,GAAG,iBAAiB,WAAW,SAAS;AAC7C,OAAK,mBAAmB,KAAK,SAAS;;CAGxC,OAAO,UAA4B;AACjC,OAAK,GAAG,iBAAiB,QAAQ,SAAS;AAC1C,OAAK,gBAAgB,KAAK,SAAS;;CAGrC,QAAQ,UAA4B;AAClC,OAAK,GAAG,iBAAiB,SAAS,SAAS;AAC3C,OAAK,iBAAiB,KAAK,SAAS;;CAGtC,QAAc;AACZ,OAAK,GAAG,OAAO;AACf,OAAK,mBAAmB,SAAS,aAAa,KAAK,GAAG,oBAAoB,WAAW,SAAS,CAAC;AAC/F,OAAK,gBAAgB,SAAS,aAAa,KAAK,GAAG,oBAAoB,QAAQ,SAAS,CAAC;AACzF,OAAK,iBAAiB,SAAS,aAAa,KAAK,GAAG,oBAAoB,SAAS,SAAS,CAAC;;CAG7F,SAAkB;AAChB,SAAO,KAAK,GAAG,eAAe,UAAU;;;;;;ACxC5C,IAAa,SAAb,cAA4BC,SAAa;CACvC,YAAY,SAAiB,SAAgC;AAC3D,cAAY,IAAI,oBAAoB,SAAS,SAAS,UAAU,CAAC"}