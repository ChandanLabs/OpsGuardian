import { JsonSchema } from "./types/schema.types.mjs";
import { StreamFactory } from "./streams/stream-factory.mjs";
import { Stream } from "./types-stream.mjs";
import { StreamAdapterManager } from "./adapters/interfaces/stream-adapter-manager.interface.mjs";
import { Printer } from "./printer.mjs";
import { StreamAuthConfig } from "./types/app-config-types.mjs";
import { ApiRouteConfig, CronConfig, EventConfig, Flow, Step } from "./types.mjs";
import { RedisClientType } from "redis";

//#region src/locked-data.d.ts
type FlowEvent = 'flow-created' | 'flow-removed' | 'flow-updated';
type StepEvent = 'step-created' | 'step-removed' | 'step-updated';
type StreamEvent = 'stream-created' | 'stream-removed' | 'stream-updated';
type StreamWrapper<TData> = (streamName: string, factory: StreamFactory<TData>) => StreamFactory<TData>;
declare class LockedData {
  readonly baseDir: string;
  readonly streamAdapter: StreamAdapterManager;
  private readonly printer;
  readonly redisClient?: RedisClientType | undefined;
  flows: Record<string, Flow>;
  activeSteps: Step[];
  devSteps: Step[];
  private stepsMap;
  private handlers;
  private stepHandlers;
  private streamHandlers;
  private streams;
  private streamWrapper?;
  private streamAuthContextType?;
  private streamAuthConfig?;
  constructor(baseDir: string, streamAdapter: StreamAdapterManager, printer: Printer, redisClient?: RedisClientType | undefined);
  applyStreamWrapper<TData>(streamWrapper: StreamWrapper<TData>): void;
  setStreamAuthConfig(config?: {
    authenticate: StreamAuthConfig['authenticate'];
    contextSchema?: JsonSchema;
  }): void;
  getStreamAuthConfig(): {
    authenticate: StreamAuthConfig["authenticate"];
  } | undefined;
  saveTypes(): void;
  on(event: FlowEvent, handler: (flowName: string) => void): void;
  onStep(event: StepEvent, handler: (step: Step) => void): void;
  onStream(event: StreamEvent, handler: (stream: Stream) => void): void;
  getActiveSteps(): Step[];
  eventSteps(): Step<EventConfig>[];
  apiSteps(): Step<ApiRouteConfig>[];
  cronSteps(): Step<CronConfig>[];
  pythonSteps(): Step[];
  tsSteps(): Step[];
  getStreams(): Record<string, StreamFactory<any>>;
  listStreams(): Stream[];
  getStreamByName(streamName: string): Stream | undefined;
  findStream(path: string): Stream | undefined;
  updateStep(oldStep: Step, newStep: Step, options?: {
    disableTypeCreation?: boolean;
  }): boolean;
  createStep(step: Step, options?: {
    disableTypeCreation?: boolean;
  }): boolean;
  deleteStep(step: Step, options?: {
    disableTypeCreation?: boolean;
  }): void;
  private createFactoryWrapper;
  createStream<TData>(baseStream: Omit<Stream, 'factory'>, options?: {
    disableTypeCreation?: boolean;
  }): StreamFactory<TData>;
  deleteStream(stream: Stream, options?: {
    disableTypeCreation?: boolean;
  }): void;
  updateStream(oldStream: Stream, stream: Stream, options?: {
    disableTypeCreation?: boolean;
  }): void;
  private createFlow;
  private removeFlow;
  private onFlowUpdated;
  private isValidStep;
  private createStreamAdapter;
}
//#endregion
export { LockedData };
//# sourceMappingURL=locked-data.d.mts.map