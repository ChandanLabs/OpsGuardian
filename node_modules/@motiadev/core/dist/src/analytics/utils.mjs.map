{"version":3,"file":"utils.mjs","names":[],"sources":["../../../src/analytics/utils.ts"],"sourcesContent":["import { track } from '@amplitude/analytics-node'\nimport crypto from 'crypto'\nimport fs from 'fs'\nimport os from 'os'\nimport path from 'path'\n\nexport const getProjectName = (baseDir: string): string => {\n  const packageJsonPath = path.join(baseDir, 'package.json')\n  if (fs.existsSync(packageJsonPath)) {\n    const packageJson = JSON.parse(fs.readFileSync(packageJsonPath, 'utf8'))\n    return packageJson.name || path.basename(baseDir)\n  }\n\n  return 'unknown'\n}\n\nexport const getUserIdentifier = (): string => {\n  const userInfo = `${os.userInfo().username}${os.hostname()}`\n  return crypto.createHash('sha256').update(userInfo).digest('hex').substring(0, 16)\n}\n\nexport const getProjectIdentifier = (baseDir: string): string => {\n  try {\n    return crypto.createHash('sha256').update(getProjectName(baseDir)).digest('hex').substring(0, 16)\n  } catch (error) {\n    return 'unknown'\n  }\n}\n\nexport const isAnalyticsEnabled = (): boolean => {\n  return process.env.MOTIA_ANALYTICS_DISABLED !== 'true'\n}\n\nexport const trackEvent = (eventName: string, properties: Record<string, any> = {}) => {\n  try {\n    if (isAnalyticsEnabled()) {\n      track(eventName, properties, {\n        user_id: getUserIdentifier() || 'unknown',\n      })\n    }\n  } catch (error) {\n    // Silently fail to not disrupt dev server\n  }\n}\n"],"mappings":";;;;;;;AAMA,MAAa,kBAAkB,YAA4B;CACzD,MAAM,kBAAkB,KAAK,KAAK,SAAS,eAAe;AAC1D,KAAI,GAAG,WAAW,gBAAgB,CAEhC,QADoB,KAAK,MAAM,GAAG,aAAa,iBAAiB,OAAO,CAAC,CACrD,QAAQ,KAAK,SAAS,QAAQ;AAGnD,QAAO;;AAGT,MAAa,0BAAkC;CAC7C,MAAM,WAAW,GAAG,GAAG,UAAU,CAAC,WAAW,GAAG,UAAU;AAC1D,QAAO,OAAO,WAAW,SAAS,CAAC,OAAO,SAAS,CAAC,OAAO,MAAM,CAAC,UAAU,GAAG,GAAG;;AAGpF,MAAa,wBAAwB,YAA4B;AAC/D,KAAI;AACF,SAAO,OAAO,WAAW,SAAS,CAAC,OAAO,eAAe,QAAQ,CAAC,CAAC,OAAO,MAAM,CAAC,UAAU,GAAG,GAAG;UAC1F,OAAO;AACd,SAAO;;;AAIX,MAAa,2BAAoC;AAC/C,QAAO,QAAQ,IAAI,6BAA6B;;AAGlD,MAAa,cAAc,WAAmB,aAAkC,EAAE,KAAK;AACrF,KAAI;AACF,MAAI,oBAAoB,CACtB,OAAM,WAAW,YAAY,EAC3B,SAAS,mBAAmB,IAAI,WACjC,CAAC;UAEG,OAAO"}