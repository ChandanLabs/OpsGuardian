{"version":3,"file":"emit.step.mjs","names":["config: ApiRouteConfig"],"sources":["../../../src/steps/emit.step.ts"],"sourcesContent":["import { z } from 'zod'\nimport type { ApiResponse, ApiRouteConfig, ApiRouteHandler } from '../types'\n\nexport const config: ApiRouteConfig = {\n  type: 'api',\n  name: 'Event Emitter',\n  description: 'System endpoint for emitting events',\n  path: '/emit',\n  method: 'POST',\n  emits: [], // Dynamic emissions\n  flows: ['_system'],\n  bodySchema: z.object({\n    topic: z.string(),\n    data: z.record(z.string(), z.any()),\n  }),\n}\n\ntype EmitData = { topic: string; data: Record<string, unknown> }\n\nexport const handler: ApiRouteHandler<\n  EmitData,\n  ApiResponse<200, { success: true; emitted: EmitData }>,\n  EmitData\n> = async (req, { emit, logger }) => {\n  const { topic, data } = req.body\n\n  logger.info('[Event Emitter] Emitting event', { topic, data })\n  await emit({ topic, data })\n\n  return {\n    status: 200,\n    body: { success: true, emitted: { topic, data } },\n  }\n}\n"],"mappings":";;;AAGA,MAAaA,SAAyB;CACpC,MAAM;CACN,MAAM;CACN,aAAa;CACb,MAAM;CACN,QAAQ;CACR,OAAO,EAAE;CACT,OAAO,CAAC,UAAU;CAClB,YAAY,EAAE,OAAO;EACnB,OAAO,EAAE,QAAQ;EACjB,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,EAAE,KAAK,CAAC;EACpC,CAAC;CACH"}