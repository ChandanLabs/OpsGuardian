{"version":3,"file":"validations.mjs","names":[],"sources":["../../../src/infrastructure-validator/validations.ts"],"sourcesContent":["import { z } from 'zod'\nimport { infrastructureSchema, queueSchema } from './schemas'\nimport type {\n  InfrastructureValidationError,\n  InfrastructureValidationResult,\n  QueueValidationError,\n  QueueValidationResult,\n} from './types'\n\nexport const validateQueueConfig = (queueConfig: unknown): QueueValidationResult => {\n  try {\n    const schema = queueSchema\n    schema.parse(queueConfig)\n\n    return { success: true }\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      const errors: QueueValidationError[] = error.issues.map((err) => ({\n        path: err.path.length > 0 ? err.path.join('.') : 'queue',\n        message: err.message,\n      }))\n\n      return {\n        success: false,\n        errors,\n      }\n    }\n\n    return {\n      success: false,\n      errors: [\n        {\n          path: 'queue',\n          message: `Unexpected validation error: ${error instanceof Error ? error.message : 'Unknown error'}`,\n        },\n      ],\n    }\n  }\n}\nexport const validateInfrastructureConfig = (infrastructureConfig: unknown): InfrastructureValidationResult => {\n  try {\n    infrastructureSchema.parse(infrastructureConfig)\n\n    return { success: true }\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      const errors: InfrastructureValidationError[] = error.issues.map((err) => ({\n        path: err.path.length > 0 ? err.path.join('.') : 'infrastructure',\n        message: err.message,\n      }))\n\n      return {\n        success: false,\n        errors,\n      }\n    }\n\n    return {\n      success: false,\n      errors: [\n        {\n          path: 'infrastructure',\n          message: `Unexpected validation error: ${error instanceof Error ? error.message : 'Unknown error'}`,\n        },\n      ],\n    }\n  }\n}\n"],"mappings":";;;;AAuCA,MAAa,gCAAgC,yBAAkE;AAC7G,KAAI;AACF,uBAAqB,MAAM,qBAAqB;AAEhD,SAAO,EAAE,SAAS,MAAM;UACjB,OAAO;AACd,MAAI,iBAAiB,EAAE,SAMrB,QAAO;GACL,SAAS;GACT,QAP8C,MAAM,OAAO,KAAK,SAAS;IACzE,MAAM,IAAI,KAAK,SAAS,IAAI,IAAI,KAAK,KAAK,IAAI,GAAG;IACjD,SAAS,IAAI;IACd,EAAE;GAKF;AAGH,SAAO;GACL,SAAS;GACT,QAAQ,CACN;IACE,MAAM;IACN,SAAS,gCAAgC,iBAAiB,QAAQ,MAAM,UAAU;IACnF,CACF;GACF"}