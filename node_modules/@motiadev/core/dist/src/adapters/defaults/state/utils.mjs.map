{"version":3,"file":"utils.mjs","names":[],"sources":["../../../../../src/adapters/defaults/state/utils.ts"],"sourcesContent":["import type { StateFilter, StateItem } from '../../interfaces/state-adapter.interface'\n\nconst getNestedValue = (obj: StateItem['value'], path: string): string | undefined => {\n  if (!obj || typeof obj !== 'object') return undefined\n\n  const mappedObj = obj as Record<string, string>\n\n  return mappedObj[path]\n}\n\nexport const inferType = (value: unknown): StateItem['type'] => {\n  if (typeof value === 'string') {\n    return 'string'\n  } else if (typeof value === 'number') {\n    return 'number'\n  } else if (typeof value === 'boolean') {\n    return 'boolean'\n  } else if (Array.isArray(value)) {\n    return 'array'\n  } else if (typeof value === 'object' && value !== null) {\n    return 'object'\n  }\n  return 'null'\n}\n\nexport const filterItem = (item: StateItem, filters: StateFilter[]): boolean => {\n  const compare = (value: string | null | undefined, operation: StateFilter['operation'], filterValue: string) => {\n    switch (operation) {\n      case 'eq':\n        return value === filterValue\n      case 'neq':\n        return value !== filterValue\n      case 'gt':\n        return value && value > filterValue\n      case 'gte':\n        return value && value >= filterValue\n      case 'lt':\n        return value && value < filterValue\n      case 'lte':\n        return value && value <= filterValue\n      case 'contains':\n        return value && value.includes(filterValue)\n      case 'notContains':\n        return !value || !value.includes(filterValue)\n      case 'startsWith':\n        return value && value.startsWith(filterValue)\n      case 'endsWith':\n        return value && value.endsWith(filterValue)\n      case 'isNotNull':\n        return value !== null && value !== undefined\n      case 'isNull':\n        return value === null || value === undefined\n    }\n  }\n\n  return filters.every((filter) => {\n    const valueFromKey = getNestedValue(item.value, filter.valueKey)\n\n    if (filter.valueKey === 'key') {\n      return compare(item.key, filter.operation, filter.value) || compare(valueFromKey, filter.operation, filter.value)\n    }\n\n    return compare(valueFromKey, filter.operation, filter.value)\n  })\n}\n"],"mappings":";AAEA,MAAM,kBAAkB,KAAyB,SAAqC;AACpF,KAAI,CAAC,OAAO,OAAO,QAAQ,SAAU,QAAO;AAI5C,QAFkB,IAED;;AAGnB,MAAa,aAAa,UAAsC;AAC9D,KAAI,OAAO,UAAU,SACnB,QAAO;UACE,OAAO,UAAU,SAC1B,QAAO;UACE,OAAO,UAAU,UAC1B,QAAO;UACE,MAAM,QAAQ,MAAM,CAC7B,QAAO;UACE,OAAO,UAAU,YAAY,UAAU,KAChD,QAAO;AAET,QAAO;;AAGT,MAAa,cAAc,MAAiB,YAAoC;CAC9E,MAAM,WAAW,OAAkC,WAAqC,gBAAwB;AAC9G,UAAQ,WAAR;GACE,KAAK,KACH,QAAO,UAAU;GACnB,KAAK,MACH,QAAO,UAAU;GACnB,KAAK,KACH,QAAO,SAAS,QAAQ;GAC1B,KAAK,MACH,QAAO,SAAS,SAAS;GAC3B,KAAK,KACH,QAAO,SAAS,QAAQ;GAC1B,KAAK,MACH,QAAO,SAAS,SAAS;GAC3B,KAAK,WACH,QAAO,SAAS,MAAM,SAAS,YAAY;GAC7C,KAAK,cACH,QAAO,CAAC,SAAS,CAAC,MAAM,SAAS,YAAY;GAC/C,KAAK,aACH,QAAO,SAAS,MAAM,WAAW,YAAY;GAC/C,KAAK,WACH,QAAO,SAAS,MAAM,SAAS,YAAY;GAC7C,KAAK,YACH,QAAO,UAAU,QAAQ,UAAU;GACrC,KAAK,SACH,QAAO,UAAU,QAAQ,UAAU;;;AAIzC,QAAO,QAAQ,OAAO,WAAW;EAC/B,MAAM,eAAe,eAAe,KAAK,OAAO,OAAO,SAAS;AAEhE,MAAI,OAAO,aAAa,MACtB,QAAO,QAAQ,KAAK,KAAK,OAAO,WAAW,OAAO,MAAM,IAAI,QAAQ,cAAc,OAAO,WAAW,OAAO,MAAM;AAGnH,SAAO,QAAQ,cAAc,OAAO,WAAW,OAAO,MAAM;GAC5D"}