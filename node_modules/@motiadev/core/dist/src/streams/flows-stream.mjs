import { StreamAdapter } from "../adapters/interfaces/stream-adapter.interface.mjs";
import { PLUGIN_FLOW_ID } from "../motia.mjs";
import { generateFlow } from "../helper/flows-helper.mjs";

//#region src/streams/flows-stream.ts
var FlowsStream = class extends StreamAdapter {
	constructor(lockedData) {
		super("__motia.flows");
		this.lockedData = lockedData;
	}
	async get(_, id) {
		const flow = this.lockedData.flows[id];
		if (!flow) return null;
		return generateFlow(id, flow.steps);
	}
	async delete(_) {
		return null;
	}
	async set(_, __, data) {
		return data;
	}
	async getGroup() {
		/**
		* Get list should receive a groupId argument but that's irrelevant for this stream
		* since we only have one group of flows.
		*/
		return Object.entries(this.lockedData.flows).map(([id, flow]) => generateFlow(id, flow.steps)).filter((flow) => flow.id !== PLUGIN_FLOW_ID);
	}
};

//#endregion
export { FlowsStream };
//# sourceMappingURL=flows-stream.mjs.map