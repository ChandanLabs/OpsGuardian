import { CronAdapter } from "../adapters/interfaces/cron-adapter.interface.mjs";
import { JsonSchema } from "./schema.types.mjs";
import { EventAdapter } from "../adapters/interfaces/event-adapter.interface.mjs";
import { StateAdapter } from "../adapters/interfaces/state-adapter.interface.mjs";
import { StreamAdapterManager } from "../adapters/interfaces/stream-adapter-manager.interface.mjs";
import { MotiaPluginContext } from "../motia.mjs";
import { z } from "zod";
import { Express } from "express";

//#region src/types/app-config-types.d.ts
type WorkbenchPlugin = {
  packageName: string;
  componentName?: string;
  label?: string;
  labelIcon?: string;
  position?: 'bottom' | 'top';
  cssImports?: string[];
  props?: Record<string, any>;
};
type MotiaPlugin = {
  workbench: WorkbenchPlugin[];
  dirname?: string;
  steps?: string[];
  onShutdown?: () => Promise<void>;
};
type MotiaPluginBuilder = (motia: MotiaPluginContext) => MotiaPlugin;
type AdapterConfig = {
  state?: StateAdapter;
  streams?: StreamAdapterManager;
  events?: EventAdapter;
  cron?: CronAdapter;
};
type StreamAuthRequest = {
  headers: Record<string, string | string[] | undefined>;
  url?: string;
};
type StreamAuthConfig<TSchema extends z.ZodTypeAny = z.ZodTypeAny> = {
  contextSchema: JsonSchema;
  authenticate: (request: StreamAuthRequest) => Promise<z.infer<TSchema> | null> | (z.infer<TSchema> | null);
};
type RedisConfig = {
  useMemoryServer?: false;
  host: string;
  port: number;
  password?: string;
  username?: string;
  db?: number;
} | {
  useMemoryServer: true;
};
type Config = {
  app?: (app: Express) => void;
  plugins?: MotiaPluginBuilder[];
  adapters?: AdapterConfig;
  streamAuth?: StreamAuthConfig;
  redis?: RedisConfig;
};
//#endregion
export { AdapterConfig, Config, MotiaPlugin, MotiaPluginBuilder, RedisConfig, StreamAuthConfig, StreamAuthRequest, WorkbenchPlugin };
//# sourceMappingURL=app-config-types.d.mts.map