{"version":3,"file":"analytics-endpoint.mjs","names":[],"sources":["../../../src/endpoints/analytics-endpoint.ts"],"sourcesContent":["import type { Express } from 'express'\nimport { getProjectIdentifier, getUserIdentifier, isAnalyticsEnabled } from '../analytics/utils'\n\nexport const analyticsEndpoint = (app: Express, baseDir: string) => {\n  app.get('/motia/analytics/user', (_req, res) => {\n    const analyticsEnabled = isAnalyticsEnabled()\n\n    if (!analyticsEnabled) {\n      res.json({\n        userId: null,\n        projectId: null,\n        motiaVersion: null,\n        analyticsEnabled: false,\n      })\n      return\n    }\n\n    res.json({\n      userId: getUserIdentifier(),\n      projectId: getProjectIdentifier(baseDir),\n      motiaVersion: process.env.npm_package_dependencies_motia || 'unknown',\n      analyticsEnabled: true,\n    })\n  })\n\n  app.get('/motia/analytics/status', (_req, res) => {\n    res.json({ analyticsEnabled: isAnalyticsEnabled() })\n  })\n}\n"],"mappings":";;;AAGA,MAAa,qBAAqB,KAAc,YAAoB;AAClE,KAAI,IAAI,0BAA0B,MAAM,QAAQ;AAG9C,MAAI,CAFqB,oBAAoB,EAEtB;AACrB,OAAI,KAAK;IACP,QAAQ;IACR,WAAW;IACX,cAAc;IACd,kBAAkB;IACnB,CAAC;AACF;;AAGF,MAAI,KAAK;GACP,QAAQ,mBAAmB;GAC3B,WAAW,qBAAqB,QAAQ;GACxC,cAAc,QAAQ,IAAI,kCAAkC;GAC5D,kBAAkB;GACnB,CAAC;GACF;AAEF,KAAI,IAAI,4BAA4B,MAAM,QAAQ;AAChD,MAAI,KAAK,EAAE,kBAAkB,oBAAoB,EAAE,CAAC;GACpD"}