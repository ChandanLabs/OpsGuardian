import { getProjectIdentifier, getUserIdentifier, isAnalyticsEnabled } from "../analytics/utils.mjs";

//#region src/endpoints/analytics-endpoint.ts
const analyticsEndpoint = (app, baseDir) => {
	app.get("/motia/analytics/user", (_req, res) => {
		if (!isAnalyticsEnabled()) {
			res.json({
				userId: null,
				projectId: null,
				motiaVersion: null,
				analyticsEnabled: false
			});
			return;
		}
		res.json({
			userId: getUserIdentifier(),
			projectId: getProjectIdentifier(baseDir),
			motiaVersion: process.env.npm_package_dependencies_motia || "unknown",
			analyticsEnabled: true
		});
	});
	app.get("/motia/analytics/status", (_req, res) => {
		res.json({ analyticsEnabled: isAnalyticsEnabled() });
	});
};

//#endregion
export { analyticsEndpoint };
//# sourceMappingURL=analytics-endpoint.mjs.map